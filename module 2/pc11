import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const MaterialApp(
      debugShowCheckedModeBanner: false,
      home: ResultScreen(),
    );
  }
}

class ResultScreen extends StatelessWidget {
  const ResultScreen({super.key});

  // Example inputs (replace with real values)
  final int trueAnswers = 6;
  final int wrongAnswers = 0;
  final int totalQuestions = 6;

  @override
  Widget build(BuildContext context) {
    // Safety: avoid division by zero
    final int total = totalQuestions == 0 ? 1 : totalQuestions;
    final double percent = (trueAnswers / total);
    final String percentText = (percent * 100).toStringAsFixed(2) + '%';

    // Decide pass / fail threshold (change if needed)
    const double passThreshold = 0.50;
    final bool isPassed = percent >= passThreshold;
    final Color ringColor = isPassed ? Colors.green : Colors.red;
    final String statusText = isPassed ? 'Passed' : 'Failed';
    final String subMessage = isPassed
        ? 'Congratulations! You are passed.'
        : 'Better luck next time. Keep practicing.';

    return Scaffold(
      appBar: AppBar(title: const Text('Result')),
      body: SingleChildScrollView(
        child: Padding(
          padding: const EdgeInsets.symmetric(horizontal: 20.0, vertical: 24),
          child: Column(
            children: [
              // Legend (Total / True / Wrong)
              Row(
                mainAxisAlignment: MainAxisAlignment.start,
                children: [
                  _legendItem(Colors.blue, 'Total Question', totalQuestions.toString()),
                  const SizedBox(width: 16),
                  _legendItem(Colors.green, 'True Question', trueAnswers.toString()),
                  const SizedBox(width: 16),
                  _legendItem(Colors.red, 'Wrong answer', wrongAnswers.toString()),
                ],
              ),

              const SizedBox(height: 24),

              // Percentage circle + status
              Row(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  // Circular progress with overlayed text
                  SizedBox(
                    width: 120,
                    height: 120,
                    child: Stack(
                      alignment: Alignment.center,
                      children: [
                        // background circle
                        SizedBox(
                          width: 120,
                          height: 120,
                          child: CircularProgressIndicator(
                            value: percent, // 0.0 - 1.0
                            strokeWidth: 12,
                            valueColor: AlwaysStoppedAnimation<Color>(ringColor),
                            backgroundColor: Colors.grey.withOpacity(0.2),
                          ),
                        ),
                        // inner white circle
                        Container(
                          width: 92,
                          height: 92,
                          decoration: BoxDecoration(
                            color: Colors.white,
                            shape: BoxShape.circle,
                            border: Border.all(color: ringColor.withOpacity(0.2)),
                          ),
                        ),
                        // percent text
                        Column(
                          mainAxisSize: MainAxisSize.min,
                          children: [
                            Text(
                              percentText,
                              style: TextStyle(
                                fontSize: 18,
                                fontWeight: FontWeight.bold,
                                color: ringColor,
                              ),
                            ),
                          ],
                        ),
                      ],
                    ),
                  ),

                  const SizedBox(width: 20),

                  // Status label
                  Text(
                    statusText,
                    style: TextStyle(
                      fontSize: 28,
                      fontWeight: FontWeight.bold,
                      color: ringColor,
                    ),
                  ),
                ],
              ),

              const SizedBox(height: 32),

              // Message
              Text(
                subMessage,
                textAlign: TextAlign.center,
                style: const TextStyle(fontSize: 20, fontWeight: FontWeight.w600),
              ),

              const SizedBox(height: 24),

              // Trophy / illustration (replace with your asset)
              Container(
                width: double.infinity,
                alignment: Alignment.center,
                child: Image.network(
                  'https://i.imgur.com/3fJ1P7V.png', // placeholder trophy image
                  width: 200,
                  height: 150,
                  fit: BoxFit.contain,
                  errorBuilder: (_, __, ___) => const SizedBox.shrink(),
                ),
              ),

              const SizedBox(height: 24),

              // Optional actions
              ElevatedButton.icon(
                onPressed: () {},
                icon: const Icon(Icons.replay),
                label: const Text('Retake Quiz'),
              ),
            ],
          ),
        ),
      ),
    );
  }

  // Helper widget for legend entries
  Widget _legendItem(Color color, String label, String value) {
    return Row(
      children: [
        Container(width: 20, height: 20, color: color),
        const SizedBox(width: 8),
        Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Text(label, style: const TextStyle(fontSize: 14)),
            Text(value, style: const TextStyle(fontWeight: FontWeight.bold)),
          ],
        ),
      ],
    );
  }
}

